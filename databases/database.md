# ğŸ¢ Partner System Database Architecture

íŒŒíŠ¸ë„ˆ ì‹œìŠ¤í…œì˜ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°ì™€ ë§ˆì´ê·¸ë ˆì´ì…˜ ìš°ì„ ìˆœìœ„ë¥¼ ì„¤ëª…í•˜ëŠ” ë¬¸ì„œì…ë‹ˆë‹¤.

## ğŸ“‹ Migration ì‹¤í–‰ ìš°ì„ ìˆœìœ„

íŒŒíŠ¸ë„ˆ ì‹œìŠ¤í…œì˜ ë§ˆì´ê·¸ë ˆì´ì…˜ì€ ë‹¤ìŒ ìˆœì„œë¡œ ì‹¤í–‰ë˜ì–´ì•¼ í•©ë‹ˆë‹¤:

### ğŸ—ï¸ Phase 1: ê¸°ë³¸ ì„¤ì • í…Œì´ë¸” (Foundation Layer)

#### 1. Partner Types Table
- **íŒŒì¼**: `2025_11_02_000001_create_partner_types_table.php`
- **ì—­í• **: íŒŒíŠ¸ë„ˆ ìœ í˜• ì •ì˜ (ê°œì¸ì‚¬ì—…ì, ë²•ì¸ì‚¬ì—…ì, í”„ë¦¬ëœì„œ ë“±)
- **ìš°ì„ ìˆœìœ„**: â­â­â­â­â­ (ìµœìš°ì„ )
- **ì˜ì¡´ì„±**: ì—†ìŒ
- **ê¸°ëŠ¥**:
  - íŒŒíŠ¸ë„ˆ ìœ í˜•ë³„ ê¸°ë³¸ ì„¤ì •
  - ì»¤ë¯¸ì…˜ êµ¬ì¡° ê¸°ë³¸ê°’
  - ë“±ê¸‰ ì‹œìŠ¤í…œ ì—°ê²°ì 

#### 2. Partner Tiers Table
- **íŒŒì¼**: `2025_11_03_000001_create_partner_tiers_table.php`
- **ì—­í• **: íŒŒíŠ¸ë„ˆ ë“±ê¸‰ ì‹œìŠ¤í…œ (Bronze, Silver, Gold, Platinum ë“±)
- **ìš°ì„ ìˆœìœ„**: â­â­â­â­â­ (ìµœìš°ì„ )
- **ì˜ì¡´ì„±**: partner_types í…Œì´ë¸”
- **ê¸°ëŠ¥**:
  - ë“±ê¸‰ë³„ í˜œíƒ ë° ìê²©ìš”ê±´
  - ì»¤ë¯¸ì…˜ìœ¨ ì°¨ë“± ì ìš©
  - ìŠ¹ê¸‰/ê°•ë“± ì¡°ê±´

### ğŸ—ï¸ Phase 2: í•µì‹¬ ì¸ë ¥ ê´€ë¦¬ í…Œì´ë¸” (Core Personnel Layer)

#### 3. Partner Engineers Table
- **íŒŒì¼**: `2025_11_03_000002_create_partner_engineers_table.php`
- **ì—­í• **: ê¸°ìˆ  íŒŒíŠ¸ë„ˆ/ì—”ì§€ë‹ˆì–´ ì „ë¬¸ ì •ë³´ ê´€ë¦¬
- **ìš°ì„ ìˆœìœ„**: â­â­â­â­ (ì¤‘ìš”)
- **ì˜ì¡´ì„±**: partner_types, partner_tiers í…Œì´ë¸”
- **ê¸°ëŠ¥**:
  - ê¸°ìˆ  ì—­ëŸ‰ ë° ìê²©ì¦ ê´€ë¦¬
  - ì „ë¬¸ ë¶„ì•¼ ë° ê²½ë ¥ ì¶”ì 
  - í”„ë¡œì íŠ¸ í• ë‹¹ ë° í‰ê°€

#### 4. Partner Users Table
- **íŒŒì¼**: `2025_11_04_000003_create_partner_users_table.php`
- **ì—­í• **: ë©”ì¸ íŒŒíŠ¸ë„ˆ íšŒì› ì •ë³´ (í•µì‹¬ í…Œì´ë¸”)
- **ìš°ì„ ìˆœìœ„**: â­â­â­â­â­ (ìµœìš°ì„ )
- **ì˜ì¡´ì„±**: partner_types, partner_tiers, users í…Œì´ë¸”
- **ê¸°ëŠ¥**:
  - íŒŒíŠ¸ë„ˆ ê¸°ë³¸ ì •ë³´ ë° í”„ë¡œí•„
  - ê³„ì¸µ êµ¬ì¡° (ì¶”ì²œì¸-í”¼ì¶”ì²œì¸)
  - ì„±ê³¼ ì¶”ì  (ë§¤ì¶œ, ë“±ê¸‰, êµìœ¡ì´ìˆ˜)
  - ê³„ì•½ ë° ìƒíƒœ ê´€ë¦¬

#### 5. Partner Applications Table
- **íŒŒì¼**: `2025_11_04_000004_create_partner_applications_table.php`
- **ì—­í• **: íŒŒíŠ¸ë„ˆ ì§€ì›ì„œ ë° ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤
- **ìš°ì„ ìˆœìœ„**: â­â­â­â­ (ì¤‘ìš”)
- **ì˜ì¡´ì„±**: partner_users í…Œì´ë¸”
- **ê¸°ëŠ¥**:
  - ì§€ì›ì„œ ì œì¶œ ë° ê²€í† 
  - ì¶”ì²œì¸ ì¶”ì  ë° ë³´ìƒ
  - ìŠ¹ì¸/ê±°ì ˆ í”„ë¡œì„¸ìŠ¤
  - ì¬ì§€ì› ê´€ë¦¬

### ğŸ—ï¸ Phase 3: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í…Œì´ë¸” (Business Logic Layer)

#### 6. Partner Commissions Table
- **íŒŒì¼**: `2025_11_04_000007_create_partner_commissions_table.php`
- **ì—­í• **: ì»¤ë¯¸ì…˜ ê³„ì‚° ë° ì§€ê¸‰ ê´€ë¦¬ (í•µì‹¬ ìˆ˜ìµ í…Œì´ë¸”)
- **ìš°ì„ ìˆœìœ„**: â­â­â­â­â­ (ìµœìš°ì„ )
- **ì˜ì¡´ì„±**: partner_users, partner_sales í…Œì´ë¸”
- **ê¸°ëŠ¥**:
  - ë‹¤ì¸µ ì»¤ë¯¸ì…˜ ê³„ì‚° (MLM)
  - ê°œì¸/ê·¸ë£¹/ì˜¤ë²„ë¼ì´ë“œ ì»¤ë¯¸ì…˜
  - ë³´ë„ˆìŠ¤ ë° ì¸ì„¼í‹°ë¸Œ ê´€ë¦¬
  - ì§€ê¸‰ ìƒíƒœ ì¶”ì 

#### 7. Partner Network Relationships Table
- **íŒŒì¼**: `2025_11_04_000008_create_partner_network_relationships_table.php`
- **ì—­í• **: íŒŒíŠ¸ë„ˆ ê°„ ë„¤íŠ¸ì›Œí¬ ë° ì¡°ì§ë„ ê´€ë¦¬
- **ìš°ì„ ìˆœìœ„**: â­â­â­â­ (ì¤‘ìš”)
- **ì˜ì¡´ì„±**: partner_users í…Œì´ë¸”
- **ê¸°ëŠ¥**:
  - ì¶”ì²œì¸-í”¼ì¶”ì²œì¸ ê´€ê³„
  - ì¡°ì§ íŠ¸ë¦¬ êµ¬ì¡°
  - íŒ€ ì„±ê³¼ ì§‘ê³„
  - ë¦¬ë”ì‹­ ì¶”ì 

#### 8. Partner Sales Table
- **íŒŒì¼**: `2025_11_05_000004_create_partner_sales_table.php`
- **ì—­í• **: íŒŒíŠ¸ë„ˆë³„ ë§¤ì¶œ ë° ì‹¤ì  ê¸°ë¡
- **ìš°ì„ ìˆœìœ„**: â­â­â­â­â­ (ìµœìš°ì„ )
- **ì˜ì¡´ì„±**: partner_users í…Œì´ë¸”
- **ê¸°ëŠ¥**:
  - ë§¤ì¶œ ì‹¤ì  ê¸°ë¡
  - ì»¤ë¯¸ì…˜ ê³„ì‚° ê¸°ì´ˆ ë°ì´í„°
  - ì„±ê³¼ ë¶„ì„ ë° ë¦¬í¬íŒ…
  - ì£¼ë¬¸ ì—°ê³„ ì¶”ì 

### ğŸ—ï¸ Phase 4: í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ í…Œì´ë¸” (Process Management Layer)

#### 9. Partner Activity Logs Table
- **íŒŒì¼**: `2025_11_09_125001_create_partner_activity_logs_table.php`
- **ì—­í• **: íŒŒíŠ¸ë„ˆ í™œë™ ì´ë ¥ ì¶”ì 
- **ìš°ì„ ìˆœìœ„**: â­â­â­ (ë³´í†µ)
- **ì˜ì¡´ì„±**: partner_users í…Œì´ë¸”
- **ê¸°ëŠ¥**:
  - ë¡œê·¸ì¸/í™œë™ ê¸°ë¡
  - ì‹œìŠ¤í…œ ì‚¬ìš© íŒ¨í„´ ë¶„ì„
  - ê°ì‚¬ ì¶”ì  (Audit Trail)
  - ë³´ì•ˆ ëª¨ë‹ˆí„°ë§

#### 10. Partner Notifications Table
- **íŒŒì¼**: `2025_11_09_125002_create_partner_notifications_table.php`
- **ì—­í• **: íŒŒíŠ¸ë„ˆ ì•Œë¦¼ ì‹œìŠ¤í…œ
- **ìš°ì„ ìˆœìœ„**: â­â­â­ (ë³´í†µ)
- **ì˜ì¡´ì„±**: partner_users í…Œì´ë¸”
- **ê¸°ëŠ¥**:
  - ì»¤ë¯¸ì…˜ ì§€ê¸‰ ì•Œë¦¼
  - êµìœ¡ ë° ì´ë²¤íŠ¸ ì•ˆë‚´
  - ì‹œìŠ¤í…œ ê³µì§€ì‚¬í•­
  - ê°œì¸ë³„ ë§ì¶¤ ì•Œë¦¼

### ğŸ—ï¸ Phase 5: í‰ê°€ ë° ì±„ìš© í…Œì´ë¸” (Evaluation & Recruitment Layer)

#### 11. Partner Interview Evaluations Table
- **íŒŒì¼**: `2025_11_09_125003_create_partner_interview_evaluations_table.php`
- **ì—­í• **: ë©´ì ‘ í‰ê°€ ë° ì±„ì  ê´€ë¦¬
- **ìš°ì„ ìˆœìœ„**: â­â­â­ (ë³´í†µ)
- **ì˜ì¡´ì„±**: partner_interviews í…Œì´ë¸”
- **ê¸°ëŠ¥**:
  - ë©´ì ‘ í‰ê°€ í•­ëª©ë³„ ì±„ì 
  - ë©´ì ‘ê´€ë³„ í‰ê°€ ê¸°ë¡
  - í•©ê²©/ë¶ˆí•©ê²© íŒì • ê¸°ì¤€
  - í‰ê°€ í”¼ë“œë°± ê´€ë¦¬

#### 12. Partner Approval Processes Table
- **íŒŒì¼**: `2025_11_09_125004_create_partner_approval_processes_table.php`
- **ì—­í• **: ìŠ¹ì¸ ì›Œí¬í”Œë¡œìš° ê´€ë¦¬
- **ìš°ì„ ìˆœìœ„**: â­â­â­ (ë³´í†µ)
- **ì˜ì¡´ì„±**: partner_applications í…Œì´ë¸”
- **ê¸°ëŠ¥**:
  - ë‹¤ë‹¨ê³„ ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤
  - ìŠ¹ì¸ê¶Œì ê´€ë¦¬
  - ìŠ¹ì¸ ì´ë ¥ ì¶”ì 
  - ìë™í™” ê·œì¹™ ì„¤ì •

#### 13. Partner Interviews Table
- **íŒŒì¼**: `2025_11_12_120000_create_partner_interviews_table.php`
- **ì—­í• **: ë©´ì ‘ ì¼ì • ë° ì§„í–‰ ê´€ë¦¬
- **ìš°ì„ ìˆœìœ„**: â­â­â­ (ë³´í†µ)
- **ì˜ì¡´ì„±**: partner_applications í…Œì´ë¸”
- **ê¸°ëŠ¥**:
  - ë©´ì ‘ ìŠ¤ì¼€ì¤„ë§
  - í™”ìƒ/ëŒ€ë©´ ë©´ì ‘ ì§€ì›
  - ë©´ì ‘ ê²°ê³¼ ê¸°ë¡
  - ì¬ë©´ì ‘ ê´€ë¦¬

### ğŸ—ï¸ Phase 6: ì„±ê³¼ ë° êµìœ¡ í…Œì´ë¸” (Performance & Training Layer)

#### 14. Partner Performance Metrics Table
- **íŒŒì¼**: `2025_11_09_125005_create_partner_performance_metrics_table.php`
- **ì—­í• **: íŒŒíŠ¸ë„ˆ ì„±ê³¼ ì§€í‘œ ìƒì„¸ ê´€ë¦¬
- **ìš°ì„ ìˆœìœ„**: â­â­â­â­ (ì¤‘ìš”)
- **ì˜ì¡´ì„±**: partner_users, partner_sales í…Œì´ë¸”
- **ê¸°ëŠ¥**:
  - KPI ì¶”ì  ë° í‰ê°€
  - ëª©í‘œ ëŒ€ë¹„ ì‹¤ì  ë¶„ì„
  - ì„±ê³¼ ë­í‚¹ ë° ë¹„êµ
  - ê°œì„  ê³„íš ìˆ˜ë¦½

#### 15. Partner Trainings Table
- **íŒŒì¼**: `2025_11_09_125006_create_partner_trainings_table.php`
- **ì—­í• **: êµìœ¡ í”„ë¡œê·¸ë¨ ê´€ë¦¬
- **ìš°ì„ ìˆœìœ„**: â­â­â­ (ë³´í†µ)
- **ì˜ì¡´ì„±**: ì—†ìŒ (ë…ë¦½ì )
- **ê¸°ëŠ¥**:
  - êµìœ¡ ê³¼ì • ë° ì»¤ë¦¬í˜ëŸ¼
  - ì˜¨ë¼ì¸/ì˜¤í”„ë¼ì¸ êµìœ¡ ì§€ì›
  - ìˆ˜ë£Œ ì¡°ê±´ ë° ì¸ì¦
  - êµìœ¡ íš¨ê³¼ ì¸¡ì •

#### 16. Partner Training Enrollments Table
- **íŒŒì¼**: `2025_11_09_125007_create_partner_training_enrollments_table.php`
- **ì—­í• **: êµìœ¡ ìˆ˜ê°• ë° ì§„ë„ ê´€ë¦¬
- **ìš°ì„ ìˆœìœ„**: â­â­â­ (ë³´í†µ)
- **ì˜ì¡´ì„±**: partner_trainings, partner_users í…Œì´ë¸”
- **ê¸°ëŠ¥**:
  - êµìœ¡ ë“±ë¡ ë° ìˆ˜ê°•
  - ì§„ë„ìœ¨ ì¶”ì 
  - í‰ê°€ ë° ì ìˆ˜ ê¸°ë¡
  - ìˆ˜ë£Œì¦ ë°œê¸‰

### ğŸ—ï¸ Phase 7: ê³ ê¸‰ ê¸°ëŠ¥ í…Œì´ë¸” (Advanced Features Layer)

#### 17. Partner Dynamic Targets Table
- **íŒŒì¼**: `2025_11_15_000003_create_partner_dynamic_targets_table.php`
- **ì—­í• **: ë™ì  ëª©í‘œ ì„¤ì • ë° ì¶”ì 
- **ìš°ì„ ìˆœìœ„**: â­â­â­â­ (ì¤‘ìš”)
- **ì˜ì¡´ì„±**: partner_users í…Œì´ë¸”
- **ê¸°ëŠ¥**:
  - ê°œì¸ë³„ ë§ì¶¤ ëª©í‘œ ì„¤ì •
  - ì‹¤ì‹œê°„ ë‹¬ì„±ë¥  ì¶”ì 
  - ëª©í‘œ ëŒ€ë¹„ ë³´ìƒ ì²´ê³„
  - ìƒìœ„/í•˜ìœ„ ëª©í‘œ ì—°ê³„

#### 18. Partner Payments Table
- **íŒŒì¼**: `2025_11_15_094751_create_partner_payments_table.php`
- **ì—­í• **: ì»¤ë¯¸ì…˜ ì‹¤ì œ ì§€ê¸‰ ì²˜ë¦¬
- **ìš°ì„ ìˆœìœ„**: â­â­â­â­â­ (ìµœìš°ì„ )
- **ì˜ì¡´ì„±**: partner_commissions í…Œì´ë¸”
- **ê¸°ëŠ¥**:
  - ì§€ê¸‰ ì‹ ì²­ ë° ìŠ¹ì¸
  - ì€í–‰ ì´ì²´ ì²˜ë¦¬
  - ì„¸ê¸ˆ ë° ìˆ˜ìˆ˜ë£Œ ê³„ì‚°
  - ì§€ê¸‰ ë‚´ì—­ ê´€ë¦¬

## ğŸ”— í…Œì´ë¸” ê°„ ì£¼ìš” ê´€ê³„ë„

```
partner_types (íŒŒíŠ¸ë„ˆ ìœ í˜•)
    â†“
partner_tiers (íŒŒíŠ¸ë„ˆ ë“±ê¸‰)
    â†“
partner_users (íŒŒíŠ¸ë„ˆ íšŒì›) â† partner_engineers (ê¸°ìˆ  íŒŒíŠ¸ë„ˆ)
    â†“                           â†“
partner_applications (ì§€ì›ì„œ) â†’ partner_interviews (ë©´ì ‘)
    â†“                           â†“
partner_network_relationships â†’ partner_interview_evaluations
    â†“
partner_sales (ë§¤ì¶œ) â†’ partner_commissions (ì»¤ë¯¸ì…˜) â†’ partner_payments (ì§€ê¸‰)
    â†“                       â†“
partner_performance_metrics â†  partner_dynamic_targets (ëª©í‘œ)
    â†“
partner_trainings â†’ partner_training_enrollments
    â†“
partner_activity_logs, partner_notifications, partner_approval_processes
```

## ğŸ“Š í•µì‹¬ í…Œì´ë¸” ë¶„ë¥˜

### ğŸ”´ ë¯¸ì…˜ í¬ë¦¬í‹°ì»¬ (ì ˆëŒ€ ì‚­ì œ ë¶ˆê°€)
- `partner_users` - íŒŒíŠ¸ë„ˆ ê¸°ë³¸ ì •ë³´
- `partner_commissions` - ì»¤ë¯¸ì…˜ ê´€ë¦¬
- `partner_payments` - ì§€ê¸‰ ì²˜ë¦¬
- `partner_sales` - ë§¤ì¶œ ë°ì´í„°

### ğŸŸ¡ ë¹„ì¦ˆë‹ˆìŠ¤ ì¤‘ìš” (ì‹ ì¤‘í•œ ê´€ë¦¬ í•„ìš”)
- `partner_types`, `partner_tiers` - ê¸°ë³¸ ì„¤ì •
- `partner_applications` - ì§€ì› í”„ë¡œì„¸ìŠ¤
- `partner_network_relationships` - ì¡°ì§ êµ¬ì¡°
- `partner_performance_metrics` - ì„±ê³¼ ê´€ë¦¬

### ğŸŸ¢ ì§€ì› ê¸°ëŠ¥ (ìœ ì—°í•œ ê´€ë¦¬ ê°€ëŠ¥)
- `partner_trainings`, `partner_training_enrollments` - êµìœ¡
- `partner_interviews`, `partner_interview_evaluations` - ì±„ìš©
- `partner_activity_logs`, `partner_notifications` - ë¡œê·¸/ì•Œë¦¼
- `partner_approval_processes` - ì›Œí¬í”Œë¡œìš°

## âš ï¸ ë§ˆì´ê·¸ë ˆì´ì…˜ ì£¼ì˜ì‚¬í•­

1. **ìˆœì„œ ì—„ìˆ˜**: ì˜ì¡´ì„±ì´ ìˆëŠ” í…Œì´ë¸”ì€ ë°˜ë“œì‹œ ìˆœì„œëŒ€ë¡œ ìƒì„±
2. **ì™¸ë˜í‚¤ ì œì•½**: SQLite í™˜ê²½ì—ì„œ ì™¸ë˜í‚¤ ì œì•½ì¡°ê±´ í™œì„±í™” í™•ì¸
3. **ë°±ì—… í•„ìˆ˜**: í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ë°˜ë“œì‹œ ë°±ì—… í›„ ì§„í–‰
4. **ë¡¤ë°± ì¤€ë¹„**: down() ë©”ì„œë“œê°€ ì˜¬ë°”ë¥´ê²Œ êµ¬í˜„ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
5. **ë°ì´í„° ë¬´ê²°ì„±**: ê¸°ì¡´ ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš° ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ ê²€ì¦ í•„ìš”

---
*ìµœì¢… ì—…ë°ì´íŠ¸: 2025-11-15*
*ì´ 18ê°œ í…Œì´ë¸”, 7ê°œ ë‹¨ê³„ë¡œ êµ¬ì„±ëœ íŒŒíŠ¸ë„ˆ ì‹œìŠ¤í…œ*